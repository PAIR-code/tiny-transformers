<div class="row">
  <app-auto-completed-text-input class="dataset-form"
    [label]="'Model'"
    [selectedName]="this.tmService.modelId"
    [itemNames]="modelNames"
    (itemSelected)="this.tmService.selectModel($event)">
    </app-auto-completed-text-input>
</div>

<div class="row" *ngIf="this.tmService.model() as model">
  <div *ngIf="view != 'edit'" class="row">
    <!-- <div class="json">{{modelConfigAsJson(model)}}</div> -->
    <div class='buttonrow'>
      <button mat-icon-button (click)="toggleModelEditor()">
        <mat-icon>edit</mat-icon>
      </button>
      <button *ngIf="model" mat-flat-button (click)="tmService.reInitModelParams()">
        re-init
      </button>
    </div>
    @if (model) {
      <div>
        Model is initialised. Params: <span>{{paramCount}}</span>
        Token vocab size: <span>{{model.config.tokenRep.tokens.length}}</span>
      </div>
    } @else {
      <div>
        Model not initialised.
      </div>
    }
  </div>
  <div *ngIf="view == 'edit'" class="code-full-screen full-width">
    <app-codemirror-config-editor
      (update)="modelConfigUpdated($event)"
      [whatIsBeingEditedName]="this.tmService.modelId"
      [defaultConfig]="this.tmService.modelConfigDefaultStr"
      [config]="currentConfigStr()"></app-codemirror-config-editor>
  </div>

</div>
